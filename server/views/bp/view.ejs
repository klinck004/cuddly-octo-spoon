<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title><%= title %></title>
  <!-- Bootstrap 5.3.2 CDN -->
  <!-- Latest compiled and minified CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Latest compiled JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>

  </script>
</head>

<body>
  <%- include('../partials/nav.ejs') %>
  <main class="container">
    <h4 class="text-center pt-2"><%= entry.date %> at <%= entry.time %>: </h4>
    <div class="d-flex justify-content-between">
      <div class="p-2 align-self-center">
        <h1 class="text-center"><%= entry.sys %>/<%= entry.dia %></h1>
        <% if (entry.rating == "High") { %>
            <div class="rounded bg-danger-subtle text-center" role="alert">High</div>     
        <%} else if (entry.rating == "Medium") { %>
            <div class="rounded bg-warning-subtle text-center" role="alert">Moderate</div>         
        <%} else if (entry.rating == "Elevated") { %>
            <div class="rounded bg-secondary-subtle text-center" role="alert">Elevated</div>        
        <%} else if (entry.rating == "Normal") { %>
            <div class="rounded bg-success-subtle text-center" role="alert">Normal</div>     
        <%} else { %>
        <% } %>
      </div>
      <div class="p-2 align-self-center">
        <a href="/bp/edit/<%= entry._id %>" class="btn btn-warning"> Edit </a>
        <a href="/bp/delete/<%= entry._id %>" class="btn btn-danger"> Delete </a>
        <script>
    /* Handles error message for delete function */

    (function () {
        function Start() {
          console.log("App started");
        }
        window.addEventListener("load", Start);
        console.log("This is running.")
        let deleteButtons = document.querySelectorAll(".btn-danger");
        for (button of deleteButtons) {
          button.addEventListener('click', (event) => {
  
            if (!confirm("Do you wish to delete this item?")) {
              event.preventDefault();
              window.location.assign("");
            } else {
              window.history.back();
            }
          });
        }
      })();
        </script>
      </div>
    </div>
    <% if (entry.notes != "") { %>
      <div class="container border border-3 rounded pt-2">
        <h5>Notes:</h5>
        <p><%= entry.notes %></p>  
      </div>
    <% } %>
  </main>
</body>
</html>